{"version":3,"sources":["../../src/tests/user.spec.js"],"names":["describe","it","expectedResult","data","user","id","username","email","role","result","userApi","to","eql","signIn","token","login","password","errors","deleteUser","message","signUp","not","have","property"],"mappings":";;AACA;;AACA;;;;;;AAFA;AAIA;AACAA,QAAQ,CAAC,OAAD,EAAU,MAAM;AACtBA,EAAAA,QAAQ,CAAC,yBAAD,EAA4B,MAAM;AACxCC,IAAAA,EAAE,CAAC,uCAAD,EAA0C,YAAY;AACtD;AACA,YAAMC,cAAc,GAAG;AACrBC,QAAAA,IAAI,EAAE;AACJC,UAAAA,IAAI,EAAE;AACJC,YAAAA,EAAE,EAAE,GADA;AAEJC,YAAAA,QAAQ,EAAE,UAFN;AAGJC,YAAAA,KAAK,EAAE,iBAHH;AAIJC,YAAAA,IAAI,EAAE;AAJF;AADF;AADe,OAAvB,CAFsD,CAYtD;;AACA,YAAMC,MAAM,GAAG,MAAMC,OAAO,CAACN,IAAR,CAAa;AAAEC,QAAAA,EAAE,EAAE;AAAN,OAAb,CAArB,CAbsD,CActD;;AACA,wBAAOI,MAAM,CAACN,IAAd,EAAoBQ,EAApB,CAAuBC,GAAvB,CAA2BV,cAA3B;AACD,KAhBC,CAAF;AAiBAD,IAAAA,EAAE,CAAC,wCAAD,EAA2C,YAAY;AACvD,YAAMC,cAAc,GAAG;AACrBC,QAAAA,IAAI,EAAE;AACJC,UAAAA,IAAI,EAAE;AADF;AADe,OAAvB,CADuD,CAMvD;;AACA,YAAMK,MAAM,GAAG,MAAMC,OAAO,CAACN,IAAR,CAAa;AAAEC,QAAAA,EAAE,EAAE;AAAN,OAAb,CAArB,CAPuD,CAQvD;;AACA,wBAAOI,MAAM,CAACN,IAAd,EAAoBQ,EAApB,CAAuBC,GAAvB,CAA2BV,cAA3B;AACD,KAVC,CAAF;AAWD,GA7BO,CAAR;AA8BAF,EAAAA,QAAQ,CAAC,mCAAD,EAAsC,MAAM;AAClDC,IAAAA,EAAE,CAAC,wDAAD,EAA2D,YAAY;AACvE;AACA,YAAM;AACJE,QAAAA,IAAI,EAAE;AACJA,UAAAA,IAAI,EAAE;AACJU,YAAAA,MAAM,EAAE;AAAEC,cAAAA;AAAF;AADJ;AADF;AADF,UAMF,MAAMJ,OAAO,CAACG,MAAR,CAAe;AACvBE,QAAAA,KAAK,EAAE,SADgB;AAEvBC,QAAAA,QAAQ,EAAE;AAFa,OAAf,CANV,CAFuE,CAavE;;AACA,YAAM;AACJb,QAAAA,IAAI,EAAE;AAAEc,UAAAA;AAAF;AADF,UAEF,MAAMP,OAAO,CAACQ,UAAR,CAAmB;AAAEb,QAAAA,EAAE,EAAE;AAAN,OAAnB,EAAgCS,KAAhC,CAFV,CAduE,CAiBvE;;AACA,wBAAOG,MAAM,CAAC,CAAD,CAAN,CAAUE,OAAjB,EAA0BR,EAA1B,CAA6BC,GAA7B,CAAiC,0BAAjC;AACD,KAnBC,CAAF;AAoBD,GArBO,CAAR;AAsBAZ,EAAAA,QAAQ,CAAC,qEAAD,EAAwE,MAAM;AACpFC,IAAAA,EAAE,CAAC,8BAAD,EAAiC,YAAY;AAC7C;AACA,YAAMQ,MAAM,GAAG,MAAMC,OAAO,CAACU,MAAR,CAAe;AAClCd,QAAAA,QAAQ,EAAE,qBADwB;AAElCC,QAAAA,KAAK,EAAE,oCAF2B;AAGlCS,QAAAA,QAAQ,EAAE;AAHwB,OAAf,CAArB,CAF6C,CAO7C;;AACA,wBAAOP,MAAM,CAACN,IAAd,EAAoBQ,EAApB,CAAuBU,GAAvB,CAA2BC,IAA3B,CAAgCC,QAAhC,CAAyC,QAAzC;AACD,KATC,CAAF;AAUD,GAXO,CAAR;AAYD,CAjEO,CAAR","sourcesContent":["// Test module from chai\r\nimport { expect } from \"chai\";\r\nimport * as userApi from \"./api\";\r\n\r\n// Test cases for user\r\ndescribe(\"users\", () => {\r\n  describe(\"user(id: String!): User\", () => {\r\n    it(\"returns a user when user can be found\", async () => {\r\n      // Expected results for comparison\r\n      const expectedResult = {\r\n        data: {\r\n          user: {\r\n            id: \"1\",\r\n            username: \"rwieruch\",\r\n            email: \"hello@robin.com\",\r\n            role: \"ADMIN\",\r\n          },\r\n        },\r\n      };\r\n      // Get data for user 1\r\n      const result = await userApi.user({ id: \"1\" });\r\n      // Compare expected result matches returned results\r\n      expect(result.data).to.eql(expectedResult);\r\n    });\r\n    it(\"returns null when user cannot be found\", async () => {\r\n      const expectedResult = {\r\n        data: {\r\n          user: null,\r\n        },\r\n      };\r\n      // Get user which doesn't exist\r\n      const result = await userApi.user({ id: \"42\" });\r\n      // compare expected results match returned results\r\n      expect(result.data).to.eql(expectedResult);\r\n    });\r\n  });\r\n  describe(\"deleteUser(id: String!): Boolean!\", () => {\r\n    it(\"returns an error because only admins can delete a user\", async () => {\r\n      // Login in non admin user, set token value\r\n      const {\r\n        data: {\r\n          data: {\r\n            signIn: { token },\r\n          },\r\n        },\r\n      } = await userApi.signIn({\r\n        login: \"ddavids\",\r\n        password: \"ddavids\",\r\n      });\r\n\r\n      // Attempt to delete user, set error value\r\n      const {\r\n        data: { errors },\r\n      } = await userApi.deleteUser({ id: \"1\" }, token);\r\n      // Compare expected error is found in error\r\n      expect(errors[0].message).to.eql(\"Not authorized as admin.\");\r\n    });\r\n  });\r\n  describe(\"signUp(username: String!, email: String!, password: String!): Token\", () => {\r\n    it(\"returns a token for new user\", async () => {\r\n      // Result of user query\r\n      const result = await userApi.signUp({\r\n        username: \"111111fdsaskdjbf111\",\r\n        email: \"1d111111eadgsdafsddstyle@gmail.com\",\r\n        password: \"deadpass2020\",\r\n      });\r\n      // Check to ensure results do not have errors property\r\n      expect(result.data).to.not.have.property(\"errors\");\r\n    });\r\n  });\r\n});\r\n"],"file":"user.spec.js"}